<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:admins="org.broadleafcommerce.admin.security.view.admins.*"
	width="800" height="800"
	creationComplete="creationComplete();">
	<mx:Script>
		<![CDATA[
			import org.broadleafcommerce.admin.security.control.events.FindAllRolesEvent;
			import org.broadleafcommerce.admin.security.model.SecurityModel;
			import org.broadleafcommerce.admin.security.control.events.FindAllAdminUsersEvent;
			import org.broadleafcommerce.admin.security.model.SecurityModelLocator;
			import mx.collections.ArrayCollection;
			
			private function creationComplete():void{
				var faae:FindAllAdminUsersEvent = new FindAllAdminUsersEvent();
				faae.dispatch();
				
				var fare:FindAllRolesEvent = new FindAllRolesEvent();
				fare.dispatch();
			}
			
			private function handleSaveClick(event:Event):void{
					//var sowe:ShowOfferWindowEvent = new ShowOfferWindowEvent(this);
					//sowe.dispatch()
			}
			
			private function handleNewRoleClick(event:Event):void{
					//var sowe:ShowOfferWindowEvent = new ShowOfferWindowEvent(this);
					//sowe.dispatch()
			}
		]]>
	</mx:Script>
	
	<mx:VBox width="100%" height="100%">
	    <mx:TabNavigator id="tnAdminCanvas"  width="100%" height="100%" paddingLeft="20" paddingBottom="20" paddingTop="20" paddingRight="20">
	
	        <mx:VBox label="Search">
	        	<admins:AdminSimpleSearchGrid />
				<admins:AdminUsersDataGrid
					id="adminUsersDataGrid"
					width="100%" 
					height="100%" 
					doubleClickEnabled="true" 
					dataProvider="{SecurityModelLocator.getInstance().adminUsers}" />
	        </mx:VBox>
	
	        <mx:VBox label="Administrator Details">
	            <mx:VBox width="100%">
	            	<mx:FormHeading label="New Administrator"/>	            	
	            	<mx:HBox width="50%">
	                    <mx:Form>
	                        <mx:FormItem label="Name">
	                            <mx:TextInput id="txtName"/>
	                        </mx:FormItem>
	                        <mx:FormItem label="Login">
	                            <mx:TextInput id="txtLogin"/>
	                        </mx:FormItem>
	                        <mx:FormItem label="Password">
	                            <mx:TextInput id="txtPassword" displayAsPassword="true"/>
	                        </mx:FormItem>
	                        <mx:FormItem label="Confirm Password">
	                            <mx:TextInput  id="txtPasswordConfirm" displayAsPassword="true"/>
	                        </mx:FormItem>
	                        <mx:FormItem label="Email">
	                            <mx:TextInput id="txtEmail"/>
	                        </mx:FormItem>
	                    </mx:Form>

		                <mx:VBox height="100%">
			                <mx:Label text="Roles"/>
			                <mx:List id="roleList" dataProvider="{SecurityModelLocator.getInstance().adminRoles}" labelField="name"></mx:List>
			               	<mx:Button
		                        label="Add New Role" 
		                        click="handleNewRoleClick(event)"/>
			            </mx:VBox>
		            
	            	</mx:HBox>
		        </mx:VBox>
		        
    	     	<mx:Button label="Save" click="handleSaveClick(event)"/>
	        </mx:VBox>
	        
	    </mx:TabNavigator>

	</mx:VBox> 
</mx:Canvas>
