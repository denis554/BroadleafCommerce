<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas 
	xmlns:mx="http://www.adobe.com/2006/mxml" 
	xmlns:product="org.broadleafcommerce.admin.view.catalog.product.*"
	currentState="none"
	width="95%">
	<mx:Script>
		<![CDATA[
			import org.broadleafcommerce.admin.control.events.catalog.product.ViewCatalogProductEvent;
			import org.broadleafcommerce.admin.control.events.catalog.product.EditCatalogProductEvent;
			import org.broadleafcommerce.admin.control.events.catalog.product.NewCatalogProductEvent;
			import org.broadleafcommerce.admin.model.AppModelLocator;
			import org.broadleafcommerce.admin.model.view.ProductModel;
			
			[Bindable]
			private var productModel:ProductModel = AppModelLocator.getInstance().productModel;
		
			private function handleNewProduct(event:Event):void{
				new NewCatalogProductEvent().dispatch();
			}
			
			private function handleViewProducts(event:Event):void{
				new ViewCatalogProductEvent().dispatch();
			}			
		]]>
	</mx:Script>
	<mx:Binding
		source="productModel.viewState"
		destination="currentState"/>
	<mx:HBox 
		width="100%"
		height="100%"
		horizontalGap="20">
		<mx:VBox
			verticalGap="10">
			<mx:LinkButton
				id="newProductLinkButton"
				label="New Product"
				click="handleNewProduct(event)"/>
			<mx:LinkButton
				id="viewProductsLinkButton"
				label="View Products"
				click="handleViewProducts(event)"/>
		</mx:VBox>
		<mx:Canvas
			id="workingAreaHBox"
			width="100%"
			height="500"
			borderStyle="solid"
			cornerRadius="4">
			<product:ProductEditForm
				id="productEditForm"
				visible="false"/>
			<product:ProductView
				id="productView"
				visible="false"/>
		</mx:Canvas>		
	</mx:HBox>
	<mx:states>
		<mx:State
			name="{ProductModel.STATE_NONE}">
			<mx:SetProperty
				target="{productEditForm}"
				name="visible"
				value="false"/>
			<mx:SetProperty
				target="{productView}"
				name="visible"
				value="false"/>
		</mx:State>
		<mx:State
			name="{ProductModel.STATE_NEW}">
			<mx:SetProperty
				target="{productView}"
				name="visible"
				value="false"/>
			<mx:SetProperty
				target="{productEditForm}"
				name="visible"
				value="true"/>
		</mx:State>
		<mx:State
			name="{ProductModel.STATE_EDIT}">
			<mx:SetProperty
				target="{productView}"
				name="visible"
				value="false"/>
			<mx:SetProperty
				target="{productEditForm}"
				name="visible"
				value="true"/>
		</mx:State>
		<mx:State
			name="{ProductModel.STATE_VIEW}">
			<mx:SetProperty
				target="{productView}"
				name="visible"
				value="true"/>
			<mx:SetProperty
				target="{productEditForm}"
				name="visible"
				value="false"/>
		</mx:State>
	</mx:states>
</mx:Canvas>