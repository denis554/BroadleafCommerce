<div class="content-area-title-bar entity-form-actions">
    <div th:if="${entityFriendlyName}" th:remove="tag">
        <h3 th:text="#{${entityFriendlyName}}"></h3>
        <h4 class="main-count">
            <span th:remove="tag" th:text="${#lists.size(listGrid.records)}" />
            <span th:remove="tag" th:text="#{${entityFriendlyName}}" />
        </h4>

        <button th:each="action : ${mainActions}"
                th:type="${action.buttonType}"
                th:attr="data-url=@{${#strings.isEmpty(action.urlOverride) ? ('/' + sectionKey + action.urlPostfix) : action.urlOverride}}"
                th:inline="text"
                th:classappend="${action.buttonClass}"
                class="button primary large">
            [[#{${action.displayText}}]]
            <span th:if="${action.displayText == 'Add'}" th:text="#{${entityFriendlyName}}" th:remove="tag" />
        </button>

    </div>

    <div th:if="${entityForm}" th:remove="tag">
        <h3 th:text="${entityForm.mainEntityName}"></h3>

        <!-- Dropdown button if more than one action -->
        <div th:if="${#lists.size(entityForm.actions) > 1}" class="button-group">
            <button type="button" class="button primary large"
                    th:classappend="${action.buttonClass}"
                    th:each="action,iterStat : ${entityForm.actions}"
                    th:if="${iterStat.index == #lists.size(entityForm.actions) - 1}"
                    th:attr="data-url=@{'/' + ${sectionKey + action.urlPostfix}},data-action=${action.urlPostfix}">
                <span th:text="#{${action.displayText}}" th:remove="tag" />
            </button>
            <button type="button" class="button primary large dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li th:each="action,iterStat : ${entityForm.actions}" th:if="${iterStat.index != #lists.size(entityForm.actions) - 1}">
                <a th:attr="data-url=@{'/' + ${sectionKey + action.urlPostfix}},data-action=${action.urlPostfix}"
                   th:classappend="${action.buttonClass}">
                        <span th:text="#{${action.displayText}}" th:remove="tag" />
                    </a>
                </li>
            </ul>
        </div>

        <!-- Otherwise normal button if one action -->
        <div th:unless="${#lists.size(entityForm.actions) > 1}" th:remove="tag">
            <button type="button" class="button primary large"
                    th:each="action,iterStat : ${entityForm.actions}" th:if="${iterStat.index == #lists.size(entityForm.actions) - 1}"
                    th:attr="data-url=@{'/' + ${sectionKey + action.urlPostfix}},data-action=${action.urlPostfix}">
                <span th:text="#{${action.displayText}}" th:remove="tag" />
            </button>
        </div>
        <img th:src="@{/img/admin/ajax-loader.gif}" class="ajax-loader" />
    </div>
</div>
