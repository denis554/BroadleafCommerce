<?xml version="1.0" encoding="UTF-8"?>
<project name="Broadleaf Commerce" default="usage" basedir="..">
	<description>
		Broadleaf Commerce Build File
    </description>

	<property name="internal.build.file" value="${basedir}/build/broadleaf.build.xml" />
	<property name="test.build.file" value="${basedir}/build/unittests.build.xml" />
	<property name="build.env" value="dev"/>

	<target name="0. Clean" description="Cleans the staging area.">
		<ant antfile="${internal.build.file}" target="clean" />
	</target>

	<target name="1. Build Jars" description="Builds all jars to the staging area.">
		<ant antfile="${internal.build.file}" target="build-jars" />
	</target>

	<target name="2. Build Framework Jar" description="Build broadleaf-framework.jar to the staging area.">
		<ant antfile="${internal.build.file}" target="build-framework-jar" />
	</target>

	<target name="3. Build Profile Jar" description="Build broadleaf-framework.jar to the staging area.">
		<ant antfile="${internal.build.file}" target="build-framework-jar" />
	</target>

	<target name="4. Build Auxiliary Jar" description="Build broadleaf-auxiliary.jar to the staging area.">
		<ant antfile="${internal.build.file}" target="build-auxiliary-jar" />
	</target>

	<target name="5. Generate Java Docs" description="Generates Javadocs for the entire application.">
		<ant antfile="${internal.build.file}" target="generate-javadocs" />
	</target>

	<target name="6. Run Tests" description="Runs all integration and unit tests.">
		<ant antfile="${test.build.file}" target="runall" />
	</target>

	<target name="7. Build Source Jars" description="Builds all source jars to the staging area.">
		<ant antfile="${internal.build.file}" target="build-source-jars" />
	</target>

	<target name="8. Build Release Binaries and Source Jars" depends="1. Build Jars, 7. Build Source Jars" description="Builds all production (disable automatic ddl table creation) binary and source jars to the staging area.">
		<property name="hibernate.hbm2ddl.auto" value="false" />
		<ant antfile="${internal.build.file}" target="build-jars"/>
		<ant antfile="${internal.build.file}" target="build-source-jars"/>
	</target>

	<target name="9. Publish Binaries and Source Jars" description="Publish production build to Ivy">
		<property name="hibernate.hbm2ddl.auto" value="false" />
		<ant antfile="${internal.build.file}" target="publish-jars" />
	</target>

	<target name="10. Run Tests with Coverage" description="Runs all tests, and provides Code Coverage reports">
		<property name="code.coverage" value="true" />
		<ant antfile="${test.build.file}" target="runall" />
	</target>

	<target name="usage">
		<echo>
			This is the ANT build file for the Broadleaf Commerce project.
		</echo>
	</target>

</project>
