<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:view="org.broadleafcommerce.admin.view.*"
	xmlns:wizard="org.broadleafcommerce.admin.view.components.wizard.*"
	xmlns:components="org.broadleafcommerce.admin.view.components.*"
	xmlns:offer="org.broadleafcommerce.admin.view.offer.*" xmlns:view1="org.broadleafcommerce.admin.offers.view.*"
	creationComplete="handleCreationComplete()">
	<mx:Script>
		<![CDATA[
			import org.broadleafcommerce.admin.tools.control.events.codetype.FindAllCodeTypesEvent;
			import org.broadleafcommerce.admin.offers.model.OfferModelLocator;
			import org.broadleafcommerce.admin.offers.model.OfferModel;
			import org.broadleafcommerce.admin.offers.vo.Offer;
			import org.broadleafcommerce.admin.offers.model.OfferModel;
			import org.broadleafcommerce.admin.offers.vo.Offer;
			import org.broadleafcommerce.admin.offers.control.events.ShowOfferWindowEvent;
			import mx.containers.TitleWindow;
			import mx.managers.PopUpManager;
			import mx.core.IFlexDisplayObject;
			import org.broadleafcommerce.admin.offers.view.events.WizardEvent;

			[Bindable]
			private static var STATE_LIST:String = "state_list";
			[Bindable]
			private static var STATE_NEW:String = "state_new";

			[Bindable]
			private var offerModel:OfferModel = OfferModelLocator.getInstance().offerModel;

			private function handleCreationComplete():void{
				new FindAllCodeTypesEvent().dispatch();
			}

			private function handleNewClick(event:Event):void{
					var sowe:ShowOfferWindowEvent = new ShowOfferWindowEvent(this);
					sowe.dispatch()
			}

			private function handleOffersDataGridDoubleClick(event:Event):void{
				var sowe:ShowOfferWindowEvent = new ShowOfferWindowEvent(this,Offer(offersDataGrid.selectedItem));
				sowe.dispatch();
			}
		]]>
	</mx:Script>
	<mx:Binding
		source="this.offerModel.offersListFiltered"
		destination="this.offersDataGrid.dataProvider"/>

	<mx:TabNavigator id="offerTN" width="100%" height="100%" >
		<mx:Canvas width="100%" height="100%" label="Offers" >
			<mx:VBox styleName="padding10" width="100%" height="100%">
				<mx:HBox verticalAlign="middle">
					<mx:Button styleName="addButton" id="addOfferBtn" height="28" label="New Offer"
						click="handleNewClick(event)" />

					<view1:OfferFilterCanvas/>
				</mx:HBox>
				<view1:OfferDataGrid
				id="offersDataGrid"
				width="100%"
				height="100%"
				doubleClickEnabled="true"
				doubleClick="handleOffersDataGridDoubleClick(event)"/>
			</mx:VBox>

		</mx:Canvas>
	</mx:TabNavigator>


	<!--	<mx:DataGrid id="offersDataGrid" x="10" y="37" width="75%" height="75%" doubleClickEnabled="true" doubleClick="handleOffersDataGridDoubleClick(event)">
		</mx:DataGrid>
		-->
</mx:Canvas>


