<?xml version="1.0" encoding="utf-8"?>
<!--
/*
 * Copyright 2008-2009 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
-->
<mx:Canvas
	xmlns:mx="http://www.adobe.com/2006/mxml"
	defaultButton="{loginButton}"
	creationComplete="handleCreationComplete()">

	<mx:Script>
		<![CDATA[
			import org.broadleafcommerce.admin.core.model.AppModelLocator;
			import org.broadleafcommerce.admin.core.model.AuthenticationModel;
			import org.broadleafcommerce.admin.core.control.events.GetAuthenticationEvent;

			[Bindable]
			private var authModel:AuthenticationModel = AppModelLocator.getInstance().authModel;

			private function handleCreationComplete():void{
				usernameInput.setFocus();
			}

			private function handleLoginClick():void{
				var gae:GetAuthenticationEvent = new GetAuthenticationEvent(usernameInput.text, passwordInput.text);
				gae.dispatch();
			}
		]]>
	</mx:Script>

	<mx:Binding source="authModel.resultString"
	                   destination="resultText.text" />

	<mx:Binding source="authModel.resultString.length > 0"
	                   destination="resultText.visible" />

	<mx:TitleWindow
		horizontalCenter="0"
		verticalCenter="0"
		horizontalAlign="center"
		verticalAlign="middle"
		layout="absolute">
		<mx:HBox horizontalGap="10"
		horizontalAlign="center"
		styleName="padding25">
			<mx:Image source="{getStyle('adminLogo')}" autoLoad="true"/>
			<mx:Form>
				<mx:FormItem label="Username:">
					<mx:TextInput id="usernameInput" />
				</mx:FormItem>
				<mx:FormItem label="Password:">
					<mx:TextInput id="passwordInput" displayAsPassword="true"/>
				</mx:FormItem>
				<mx:FormItem>
					<mx:Button id="loginButton" label="Login" click="handleLoginClick()"/>
				</mx:FormItem>
			</mx:Form>
		</mx:HBox>


		<mx:Text id="resultText" text="Text" />
		<mx:Label text="Login Result: " visible="{resultText.visible}"/>
	</mx:TitleWindow>
</mx:Canvas>
